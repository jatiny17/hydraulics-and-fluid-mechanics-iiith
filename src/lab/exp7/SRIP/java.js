var img;

function construct() {

    var draw = window.value;

    var v1 = draw.polyline([
        [500, 150],
        [730, 280],
        [950, 150],
        [720, 30],
        [500, 150]
    ]).fill('none').stroke({
        width: 2
    });

    var v2 = draw.polyline([
        [720, 30],
        [720, 60],
        [522, 164],
        [500, 150]
    ]).fill('#A3A09E').stroke({
        width: 2
    });

    var v3 = draw.polyline([
        [720, 30],
        [720, 60],
        [928, 165],
        [950, 150]
    ]).fill('#A3A09E').stroke({
        width: 2
    });

    var v4 = draw.polyline([
        [500, 150],
        [500, 320],
        [730, 450],
        [730, 280]
    ]).fill('#A3A09E').stroke({
        width: 2
    });

    var v5 = draw.polyline([
        [730, 280],
        [730, 450],
        [950, 320],
        [950, 150]
    ]).fill('#A3A09E').stroke({
        width: 2
    });

    var v6 = draw.polyline([
        [720, 30],
        [720, 60],
        [522, 164],
        [500, 150]
    ]).fill('#A3A09E').stroke({
        width: 2
    });

    var v7 = draw.polyline([
        [500, 150],
        [730, 280],
        [950, 150],
        [720, 30],
        [500, 150]
    ]).fill('none').stroke({
        width: 2
    });

    /****************************************************************************************/

    var v8 = draw.polyline([
        [790, 450],
        [940, 355],
        [1090, 420],
        [950, 520],
        [790, 450]
    ]).fill('none').stroke({
        width: 2
    });

    var v9 = draw.polyline([
        [940, 355],
        [940, 380],
        [810, 459],
        [790, 450]
    ]).fill('#A3A09E').stroke({
        width: 2
    });

    var v10 = draw.polyline([
        [940, 355],
        [940, 380],
        [1072, 433],
        [1090, 420]
    ]).fill('#A3A09E').stroke({
        width: 2
    });

    var v11 = draw.polyline([
        [790, 450],
        [790, 540],
        [950, 615],
        [950, 520]
    ]).fill('#A3A09E').stroke({
        width: 2
    });

    var v12 = draw.polyline([
        [950, 520],
        [950, 615],
        [1090, 515],
        [1090, 420]
    ]).fill('#A3A09E').stroke({
        width: 2
    });

    var v13 = draw.polyline([
        [790, 450],
        [940, 355],
        [1090, 420],
        [950, 520],
        [790, 450]
    ]).fill('none').stroke({
        width: 2
    });
    /******************************************************************************************/


    var v14 = draw.polyline([
        [500, 320],
        [500, 500],
        [535, 520],
        [535, 338]
    ]).stroke({
        width: 2
    });

    var v15 = draw.polyline([
        [535, 520],
        [700, 380]
    ]).stroke({
        width: 2
    });

    var v16 = draw.polyline([
        [500, 150],
        [500, 320],
        [730, 450],
        [730, 280]
    ]).fill('#A3A09E').stroke({
        width: 2
    });

    var v17 = draw.polyline([
        [500, 150],
        [730, 280],
        [950, 150],
        [720, 30],
        [500, 150]
    ]).fill('none').stroke({
        width: 2
    });

    var v18 = draw.polyline([
        [690, 427],
        [690, 565],
        [730, 590],
        [730, 450]
    ]).stroke({
        width: 2
    });

    var v19 = draw.polyline([
        [730, 590],
        [790, 540]
    ]).stroke({
        width: 2
    });

    var v20 = draw.polyline([
        [950, 300],
        [950, 360]
    ]).stroke({
        width: 2
    });

    /*******************************************************************************************/

    var v21 = draw.polyline([
        [950, 615],
        [950, 650],
        [930, 640],
        [930, 605]
    ]).stroke({
        width: 2
    });

    var v22 = draw.polyline([
        [950, 650],
        [1090, 545],
        [1090, 510]
    ]).fill('none').stroke({
        width: 2
    });

    var v23 = draw.polyline([
        [790, 538],
        [790, 585],
        [810, 595],
        [810, 550]
    ]).stroke({
        width: 2
    });

    var v24 = draw.polyline([
        [810, 595],
        [845, 565]
    ]).stroke({
        width: 2
    });

    /*******************************************************************************************/

    var v26 = draw.polyline([
        [520, 40],
        [620, 100],
        [630, 120],
        [650, 110],
        [640, 90],
        [540, 30]
    ]).stroke({
        width: 2
    });

    // var v27=draw.circle(50).fill('none').move(510,12).stroke({
    //     width:2
    // });

    // var v28=draw.circle(60).fill('none').move(505,7).stroke({
    //     width:2
    // });

    var v29 = draw.polyline([
        [520, 40],
        [530, 50],
        [615, 103],
        [620, 115],
        [630, 120]
    ]).fill('none').stroke({
        width: 2
    });

    /*******************************************************************************************/
    var v30 = draw.polyline([
        [525, 165],
        [730, 280],
        [925, 163],
        [720, 60]
    ]).fill('#2DA4E5').opacity(0.7);

    var v31 = draw.polyline([
        [520, 40],
        [620, 100],
        [630, 120],
        [650, 110],
        [640, 90],
        [540, 30]
    ]).stroke({
        width: 2
    });

    /*******************************************************************************************/

    var v32 = draw.polyline([
        [805, 340],
        [860, 400]
    ]).stroke({
        width: 2
    });

    var v33 = draw.polyline([
        [850, 310],
        [900, 370]
    ]).stroke({
        width: 2
    });

    var v34 = draw.path("M 857 400 A 200 2000 100 0 0 900 370").fill('none').stroke({
        width: 2
    });

    var v35 = draw.path("M 857 400 A 200 2000 100 0 1 900 370").fill('none').stroke({
        width: 2
    });

    var v36 = draw.path("M 805 340 A 200 1700 100 0 1 850 310").fill('#425058').stroke({
        width: 2
    });

    var v37 = draw.polyline([
        [850, 310],
        [805, 340],
        [850, 390],
        [900, 368]
    ]).fill('#425058');

    var v38 = draw.polyline([
        [857, 400],
        [820, 330],
        [860, 360],
        [885, 360]
    ]).fill('#425058');

    var v39 = draw.polyline([
        [805, 340],
        [860, 400]
    ]).stroke({
        width: 2
    });

    var v40 = draw.polyline([
        [850, 310],
        [900, 370]
    ]).stroke({
        width: 2
    });

    var v41 = draw.path("M 857 400 A 200 2000 100 0 0 900 370").fill('#829097').stroke({
        width: 2
    });

    var v42 = draw.path("M 857 400 A 200 2000 100 0 1 900 370").fill('#829097').stroke({
        width: 2
    });

    var v43 = draw.path("M 805 340 A 200 1700 100 0 1 850 310").fill('#425058').stroke({
        width: 2
    });

    /*******************************************************************************************/
    var v44 = draw.polyline([
        [200, 670],
        [1400, 670]
    ]).stroke({
        width: 2
    });
}

window.onload = function() {
    window.value = SVG("setup").size(1800, 800);
    document.getElementById('plot').disabled = true;
    construct();
}

function reload() {
    document.getElementById('start').disabled = true;

    location.reload();
}


function animation(btn) {

    document.getElementById(btn.id).disabled = true;

    var draw = window.value;

    var v0 = draw.rect(7, 0.01).attr({
        'fill': '#2DA4E5',
        x: 646,
        y: 111
    });

    v0.animate().size(7, 6);

    var v1 = draw.rect(14, .01).attr({
        'fill': '#2DA4E5',
        x: 639,
        y: 115
    });

    v1.animate({
        delay: '0.5s'
    }).size(14, 5);

    var v2 = draw.rect(22, 0.1).attr({
        'fill': '#2DA4E5',
        x: 631,
        y: 118
    });

    v2.animate({
        delay: '1s'
    }).size(22, 50);

    var v26 = draw.polyline([
        [520, 40],
        [620, 100],
        [630, 120],
        [650, 110],
        [640, 90],
        [540, 30]
    ]).stroke({
        width: 2
    });

    var v3 = draw.rect(22, 0.01).attr({
        'fill': '#2DA4E5',
        x: 880,
        y: 377
    });

    v3.animate({
        delay: '2s'
    }).size(22, 10);

    var v4 = draw.rect(38, 0.01).attr({
        'fill': '#2DA4E5',
        x: 863,
        y: 387
    });

    v4.animate({
        delay: '3s'
    }).size(38, 60);

    var v5 = draw.polyline([
        [850, 310],
        [805, 340],
        [850, 390],
        [900, 368]
    ]).fill('#425058');

    var v6 = draw.polyline([
        [857, 400],
        [820, 330],
        [860, 360],
        [885, 360]
    ]).fill('#425058');

    var v7 = draw.polyline([
        [805, 340],
        [860, 400]
    ]).stroke({
        width: 2
    });

    var v8 = draw.polyline([
        [850, 310],
        [900, 370]
    ]).stroke({
        width: 2
    });

    var v9 = draw.path("M 857 400 A 200 2000 100 0 0 900 370").fill('#829097').stroke({
        width: 2
    });

    var v10 = draw.path("M 857 400 A 200 2000 100 0 1 900 370").fill('#829097').stroke({
        width: 2
    });

    var v11 = draw.path("M 805 340 A 200 1700 100 0 1 850 310").fill('#425058').stroke({
        width: 2
    });

    // var v12=draw.polyline([[500,500],[600,500],[600,600]]).fill('#2DA4E5').opacity(0.7)

}


function b() {
    var g = 9.81;
    var density = 1000;
    var pi = 3.14159265359;

    var Q, Q2, H, H2, n, n2, x, x2, n, m2;

    Q = document.getElementById("form").elements["water-rate1"].value;

    Q2 = document.getElementById("form").elements["water-rate2"].value;

    H = document.getElementById("form").elements["water-head1"].value;

    H2 = document.getElementById("form").elements["water-head2"].value;

    n = document.getElementById("form").elements["revolution1"].value;

    n2 = document.getElementById("form").elements["revolution2"].value;

    x = document.getElementById("form").elements["length1"].value;

    x2 = document.getElementById("form").elements["length2"].value;

    m = document.getElementById("form").elements["mass1"].value;

    m2 = document.getElementById("form").elements["mass2"].value;

    var omega = 2 * pi * n;
    var omega2 = 2 * pi * n2;

    try {
        var input_power = density * g * H * Q;

        input_power = parseFloat(input_power) / 1000;

        var output_power = parseFloat(omega) * m * x;


        var input_power2 = density * g * H2 * Q2;

        input_power2 = parseFloat(input_power2) / 1000;

        var output_power2 = parseFloat(omega2) * m2 * x2;

        var efficiency = parseFloat(output_power - output_power2) / parseFloat(input_power - input_power2);

        // alert("The input power is "+input_power);
        // alert("The output power is "+output_power);
        // alert("Efficiency of the Pelton Turbine is "+efficiency);


        var chart = new CanvasJS.Chart("chartContainer", {

            title: {

                text: "Efficiency of the Pelton Turbine"
            },

            data: [{
                type: "line",

                dataPoints: [{
                        x: input_power,
                        y: output_power
                    },
                    {
                        x: input_power2,
                        y: output_power2
                    }
                ]
            }]
        });

        chart.render();

    } catch (e) {
        alert("Error: " + e);
    }
}

function enable() {
    document.getElementById('plot').disabled = false;
}